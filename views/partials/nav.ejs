<header class="bg-red-500 text-white p-4 shadow-md">
  <nav class="container mx-auto flex justify-between items-center">
    <ul class="flex space-x-4">
      <li>
        <a
          href="/"
          class="<%= currentPage === 'index' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
          >airbnb</a
        >
      </li>
      <% if(isLoggedIn ){ %>
                
        <% if(usertype === 'guest'){ %>
              <li>
                <a
                  href="/homes"
                  class="<%= currentPage === 'Home' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Homes-List</a
                >
              </li>
              <li>
                <a
                  href="/favourites"
                  class="<%= currentPage === 'favourites' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Favourites</a
                >
              </li>
              <li>
                <a
                  href="/bookings"
                  class="<%= currentPage === 'bookings' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Bookings</a
                >
              </li>
        <% } else if(usertype === 'host'){ %>
              <li>
                <a
                  href="/homes"
                  class="<%= currentPage === 'Home' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Homes-List</a
                >
              </li>
              <li>
                <a
                  href="/favourites"
                  class="<%= currentPage === 'favourites' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Favourites</a
                >
              </li>
              <li>
                <a
                  href="/bookings"
                  class="<%= currentPage === 'bookings' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Bookings</a
                >
              </li>
              <li>
                <a
                  href="/host/host-home-list"
                  class="<%= currentPage === 'host-homes' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Host Homes</a
                >
              </li>
              <li>
                <a
                  href="/host/add-home"
                  class="<%= currentPage === 'addHome' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                  >Add Home</a
                >
              </li>
        <% }  %>

      <% } %>  

        <% if(!isLoggedIn){ %>
          <li>
                <a
                href="/signup"
                class="<%= currentPage === 'signup' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                >Signup</a>
          </li>
          <li>
                <a
                href="/login"
                class="<%= currentPage === 'login' ? 'bg-red-400' : 'hover:bg-red-400' %> py-2 px-4 rounded transition duration-300"
                >Login
                </a>
          </li>
        <% } else { %>
            <li>
                <button
                  id="logoutBtn"
                  class="hover:bg-red-400 py-2 px-4 rounded transition duration-300"
                >
                  Logout
                </button>
              </li>

              <script>
                document.getElementById("logoutBtn").addEventListener("click", async () => {
                  try {
                    const res = await fetch("/api/auth/logout", {
                      method: "POST",
                      headers: { "Content-Type": "application/json" }
                    });

                    if (!res.ok) {
                      alert("Logout failed");
                      return;
                    }

                    // JWT cookie is cleared by server
                    window.location.href = "/";
                  } catch (err) {
                    alert("Network error during logout");
                  }
                });
              </script>
        <% } %>
    </ul>
  </nav>
</header>