<%- include('../partials/head') %>
<<<<<<< HEAD
  </head>
  <body>
    <%- include('../partials/nav') %>
    <main class="container mx-auto mt-20 text-center">
      <h2 class="text-6xl font-bold text-red-500 mb-4">My Bookings</h2>
      <p class="text-2xl text-gray-700 mb-8">Bookings will appear here</p>
    </main>
  </body>
=======
</head>
<body>
  <%- include('../partials/nav') %>

  <main class="container mx-auto bg-white shadow-lg rounded-lg p-8 mt-10 max-w-6xl">
    <h2 class="text-3xl text-red-500 font-bold text-center mb-6">
      Here are your Bookings:
    </h2>

    <% if (!bookings || bookings.length === 0) { %>
      <p class="text-center text-gray-600">No bookings found.</p>
    <% } else { %>

      <div class="flex flex-wrap justify-center gap-6">
        <% bookings.forEach(b => { 
             const home = b.home; 
        %>
          <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition duration-300 w-full max-w-sm">
            <img src="<%= home.photo %>" alt="<%= home.houseName %>" class="w-full h-48 object-cover">

            <div class="p-4">
              <h3 class="text-xl font-semibold text-gray-800 mb-1"><%= home.houseName %></h3>
              <p class="text-gray-600 mb-2">
                <i class="fas fa-map-marker-alt mr-2"></i><%= home.location %>
              </p>

              <div class="text-sm text-gray-700 space-y-1 mb-3">
                <p><b>Status:</b> <span class="capitalize"><%= b.status %></span></p>
                <p><b>Check-in:</b> <%= new Date(b.checkIn).toDateString() %></p>
                <p><b>Check-out:</b> <%= new Date(b.checkOut).toDateString() %></p>
                <p><b>Guests:</b> <%= b.guests.length %></p>
                <p><b>Price/Night:</b> Rs <%= b.pricePerNight %></p>
                <p class="text-lg font-bold text-red-500"><b>Total:</b> Rs <%= b.totalPrice %></p>
              </div>

              <div class="flex gap-3">
                <% if (b.status === "confirmed") { %>
                  <form action="/booking/<%= b._id %>/cancel" method="POST" class="w-full">
                    <button class="w-full bg-red-500 text-white py-2 rounded hover:bg-red-600">
                      Cancel
                    </button>
                  </form>
                <% } else if (b.status === "paylater") { %>
                  <a href="/payment/<%= b._id %>" class="w-full text-center bg-green-600 text-white py-2 rounded hover:bg-green-700">
                    Pay Now
                  </a>

                  <form action="/payment/<%= b._id %>/cancel" method="POST" class="w-full">
                    <button class="w-full bg-gray-200 py-2 rounded hover:bg-gray-300">
                      Cancel
                    </button>
                  </form>
                <% } else { %>
                  Cancelled

                <% } %>
              </div>

            </div>
          </div>
        <% }) %>
      </div>

    <% } %>
  </main>
</body>
>>>>>>> working
</html>
